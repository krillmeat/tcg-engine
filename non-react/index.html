<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>DGMN TCG</title>
  <meta name="description" content="A simple HTML5 Template for new projects.">
  <meta name="author" content="SitePoint">

  <meta property="og:title" content="A Basic HTML5 Template">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.sitepoint.com/a-basic-html5-template/">
  <meta property="og:description" content="An App to Play TCGs">
  <meta property="og:image" content="image.png">

  <!-- <link rel="icon" href="/favicon.ico">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml"> -->
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="CSS/reset.css">
  <link rel="stylesheet" href="CSS/main.css">
  <link rel="stylesheet" href="CSS/field.css">
  <link rel="stylesheet" href="CSS/deck.css">
  <link rel="stylesheet" href="CSS/hand.css">
  <link rel="stylesheet" href="CSS/security.css">
  <link rel="stylesheet" href="CSS/breeding.css">
  <link rel="stylesheet" href="CSS/card.css">
  <link rel="stylesheet" href="CSS/dgmn.css">

</head>

<body>
  <div class='game-field'>

    <div id='memory-gauge'>
      <ul><li>10</li><li>9</li><li>8</li><li>7</li><li>6</li><li>5</li><li>4</li><li>3</li><li>2</li><li>1</li><li>0</li><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li></ul>
    </div>

    <!-- OPPONENT -->
    <div id='opponent-field' class='play-field'>
      <div class='right-side'>
        <div class='deck-zone'>
          <div id='opponent-deck' class='deck'><img src='https://rossdanielconover.com/DGMN_CARDS/card-back.png'/> <div class='deck-count'>0</div></div>
        </div>
      </div>
      <div class='hand-zone'>
        <ul id='opponent-hand' class='hand'>
          <!-- CARDS GET DRAWN HERE -->
        </ul>
      </div>
      <div id='opponent-battlefield' class='battle-zone'>
        <div id='opponent-dgmn' class='dgmn-zone'>
        </div>
        <div id='opponent-tamers' class='tamer-zone'></div>
      </div>
      <div class='left-side'>
        <div class='security-zone'>
          <ul id='opponent-security' class='security'>
            <!-- SECURITY GOES HERE-->
          </ul>
        </div>
        <div class='breeding-zone'>
          <div id='opponent-breeding'>
            <img src='https://rossdanielconover.com/DGMN_CARDS/egg-card-back.png' class='breeding-deck'/>
            <div class='current-breeding'>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- PLAYER -->
    <div id='player-field' class='play-field'>
      <div class='right-side'>
        <div class='deck-zone'>
        <div id='player-deck' class='deck'><img src='https://rossdanielconover.com/DGMN_CARDS/card-back.png'/> <div class='deck-count'>0</div></div>
        </div>
        <!-- TRASH, EVENTUALLY -->
      </div>
      <div class='hand-zone'>
        <ul id='player-hand' class='hand'>
          <!-- CARDS GET DRAWN HERE -->
        </ul>
      </div>
      <div id='player-battlefield' class='battle-zone'>
        <div id='player-dgmn' class='dgmn-zone'>
          <div class='play-to-field'><!----></div>
        </div>
        <div id='player-tamers' class='tamer-zone'></div>
      </div>
      <div class='left-side'>
        <div class='security-zone'>
          <ul id='player-security' class='security'>
            <!-- SECURITY GOES HERE-->
          </ul>
        </div>
        <div class='breeding-zone'>
          <div id='player-breeding'>
            <img src='https://rossdanielconover.com/DGMN_CARDS/egg-card-back.png' class='breeding-deck'/>
            <div class='current-breeding'>
            </div>
          </div>
        </div>
      </div>
    </div>

    <button class='start-button'>Start Game</button>
    <div class='phase-message'><p class='player-number'>0</p><p class='phase-name'>SETUP</p></div>

  </div>

  <script src='UTILS/utils.js'></script>

  <script src="SERVER/server.js"></script>
  <script src="SERVER/actions.js"></script>

  <script src="DB/card.db.js"></script>
  <script src="DB/deck.db.js"></script>

  <script src="CLASSES/Game.js"></script>
  <script src="CLASSES/Memory-Gauge.js"></script>
  <script src="CLASSES/Deck.js"></script>
  <script src="CLASSES/Hand.js"></script>
  <script src="CLASSES/Card.js"></script>
  <script src="CLASSES/Security.js"></script>
  <script src="CLASSES/Breeding.js"></script>
  <script src="CLASSES/Battlefield.js"></script>
  <script src="CLASSES/Dgmn.js"></script>
  <script type='text/javascript'>


   // LOT OF TEMPORARY STUFF HERE
   let game;
   const SITE_URL = window.location.href;
   const queryParams = SITE_URL.indexOf("?") !== -1 ? SITE_URL.substring(SITE_URL.indexOf("?")+1).split("&") : [];

   let showNotes = true;
   let showDebug = queryParams[getParamIndex(queryParams,'debug')]?.split("=")[1] === 'true';
   logDebug(`Query Params = ${queryParams}`);
   logNote('Starting Game');
   let login = queryParams[getParamIndex(queryParams,'login')]?.split("=")[1];
   let skipWS = queryParams[getParamIndex(queryParams,'skip-ws')]?.split("=")[1] === 'true';
   if(skipWS){
    game = new Game();
    // startGame();
   } else{
    //  let ws = new WebSocket(login);
     game = new Game(login);
   }
  </script>
</body>
</html>